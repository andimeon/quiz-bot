# Чат-боты для проведения викторины

Данные боты зададют пользователю различные вопросы и предлагают написать правильный ответ. Когда пользователь затрудняется ответить, бот подсказвает правильный ответ.

## Переменные и среда окружения

Доступны 6 переменных окружения:

`TG_TOKEN` - токен от бота в телеграмме.

`VK_TOKEN` - токен от бота в VK.

`DIR_FILES` - путь к `txt` файлам с вопросами и ответами.

`REDIS_URL` - ссылка на облачную версию базы данных [Redis](https://redislabs.com).

`REDIS_PORT` - порт базы данных.

`REDIS_PASSWORD` - пароль к базе данных.

## Локальный запуск на компьютере

Переменные окружения активируются различными способами.

Либо с помощью библиотеки [python-dotenv](https://pypi.org/project/python-dotenv/). Тогда переменные необходимо поместить в файл `.env`.

Либо использованием приложения [direnv](https://github.com/direnv/direnv). Установку и активацию библиотеки необходимо провести согласно инструкции для своей оболочки.В файл `.envrc` который должен находится в папке проекта нужно поместить переменные окружения.
После этого, при входе в папку и запуске скриптов ботов переменные будут подгружаться автоматически (необходимо только
исправить определение переменных в скрипте, согласно инструкциям в библиотеке).

Либо из командной строки

```bash
export VARIABLE=VALUE
```

***

### Перед дальнейшими шагами рекомендуется активировать виртуальное окружение venv

Скрипт адаптирован под Python ver 3.8.0

Используйте `pip` для установки зависимостей:

```bash
pip install -r requirements.txt
```

Запуск проекта осуществляется из командной строки:

```bash
python tg_bot.py
python vk_bot.py
```

## Как задеплоить проект на сервис [heroku](https://dashboard.heroku.com/apps)

Необходимо создать новое приложение на сервисе и подключить Github с репозиторием, где находится бот. Нужно создать [Procfile](https://devcenter.heroku.com/articles/procfile). Переменные окружения поместить в [settings](https://dashboard.heroku.com/apps/devman-telegram-bot/settings) `Config var`. Активация окружения Google Cloud производится созданием [bildpack](https://github.com/gerywahyunugraha/heroku-google-application-credentials-buildpack).
После деплоя проекта необходимо активировать скрипты в разделе [Resources](https://dashboard.heroku.com/apps/speach-bot/resources).

## Дополнительные скрипты в репозитории

`quiz_dict.py` составляет список из словарей. В каждом находится вопрос, ответ, зачет и комментарий.

`reddis_connection.py` связь с базой данных [Redis](https://redislabs.com).

## Пример работы скрипта

Telegram

![screenshot](screenshots/tg_gif.gif)

Vk (Вконтакте)

![screenshot](screenshots/vk_gif.gif)

## Цель проекта

Код написан в образовательных целях на онлайн-курсе для веб-разработчиков [dvmn.org](https://dvmn.org/).
